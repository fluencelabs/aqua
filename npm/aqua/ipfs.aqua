module IpfsExports

import "@fluencelabs/aqua-ipfs/ipfs-api.aqua"
import "@fluencelabs/aqua-ipfs/ipfs.aqua"

export uploadFile

data UploadResult:
  error: string
  cid: string
  size: u64

service IPFS("ipfs"):
  uploadFile(path: string, multiaddr: IpfsMultiaddrResult) -> UploadResult

func uploadFile(path: string) -> UploadResult:
  on HOST_PEER_ID:
    multiaddr <- get_external_api_multiaddr(HOST_PEER_ID)
  result <- IPFS.uploadFile(path, multiaddr)
  <- result



