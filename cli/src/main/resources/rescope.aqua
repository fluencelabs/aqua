service Exp("exp"):
    foo: -> u32
    bar: string -> ()

func expInner() -> u32:
    a <- Exp.foo()
    b <- Exp.foo()
    <- a

func expInput(v: string) -> u32:
    a <- Exp.foo()
    Exp.bar(v)
    <- a

func expOuter(input: string, callback: u32 -> ()):
    a <- expInner()
    b <- Exp.foo()
    relay <- expInner()
    Exp.bar(input)
    expInput(input)
    callback(relay)
